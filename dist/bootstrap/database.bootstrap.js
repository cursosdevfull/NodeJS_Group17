"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DatabaseBootstrap=void 0;const typeorm_1=require("typeorm"),parameters_1=require("../core/parameters/parameters"),logger_1=require("../core/utils/logger");class DatabaseBootstrap{constructor(){this.logger=logger_1.Logger.createLogger()}initialize(){const e=parameters_1.Parameters.dbConfig,t=new typeorm_1.DataSource(Object.assign({type:"mysql"},e));DatabaseBootstrap.appDataSource=t;return t.initialize().then((()=>{this.logger.logInfo("Database is running",e)})),Promise.resolve(`Connecting to database ${e.host}:${e.port}...`)}close(){var e;return this.logger.logInfo("Closing database..."),null===(e=DatabaseBootstrap.appDataSource)||void 0===e?void 0:e.destroy()}static getDataSource(){return DatabaseBootstrap.appDataSource}}exports.DatabaseBootstrap=DatabaseBootstrap;