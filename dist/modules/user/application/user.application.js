"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,o){return new(t||(t=Promise))((function(n,s){function i(e){try{_(o.next(e))}catch(e){s(e)}}function u(e){try{_(o.throw(e))}catch(e){s(e)}}function _(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,u)}_((o=o.apply(e,r||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserApplication=void 0;const neverthrow_1=require("neverthrow"),exception_1=require("../../../core/handle-errors/responses/exception"),user_response_dto_1=require("./dtos/user-response.dto");class UserApplication{constructor(e){this.repository=e}save(e){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.repository.save(e);if(r.isErr())return(0,neverthrow_1.err)(r.error);const t=r.value;return(0,neverthrow_1.ok)(user_response_dto_1.UserResponseDto.transform(t))}))}getAll(){return __awaiter(this,void 0,void 0,(function*(){const e=yield this.repository.getAll();if(e.isErr())return(0,neverthrow_1.err)(e.error);const r=e.value;return(0,neverthrow_1.ok)(user_response_dto_1.UserResponseDto.transform(r))}))}getById(e){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.repository.getById(e);if(r.isErr())return(0,neverthrow_1.err)(r.error);const t=r.value;return t?(0,neverthrow_1.ok)(t):(0,neverthrow_1.err)(new exception_1.NotFoundException({message:"User not found",name:"User not found"}))}))}getByEmail(e){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.repository.getByEmail(e);if(r.isErr())return(0,neverthrow_1.err)(r.error);const t=r.value;return t?(0,neverthrow_1.ok)(user_response_dto_1.UserResponseDto.transform(t)):(0,neverthrow_1.err)(new exception_1.NotFoundException({message:"User not found",name:"User not found"}))}))}getByRefreshToken(e){return __awaiter(this,void 0,void 0,(function*(){const r=yield this.repository.getByRefreshToken(e);if(r.isErr())return(0,neverthrow_1.err)(r.error);const t=r.value;return(0,neverthrow_1.ok)(user_response_dto_1.UserResponseDto.transform(t))}))}getByPage(e,r){return __awaiter(this,void 0,void 0,(function*(){const t=yield this.repository.getByPage(e,r);if(t.isErr())return(0,neverthrow_1.err)(t.error);const o=t.value;return(0,neverthrow_1.ok)(user_response_dto_1.UserResponseDto.transform(o))}))}}exports.UserApplication=UserApplication;