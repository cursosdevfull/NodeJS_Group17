"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.router=void 0;const express_1=require("express"),authentication_guard_1=require("../../../core/guards/authentication.guard"),validate_middleware_1=require("../../../core/validate/validate.middleware"),user_application_1=require("../../user/application/user.application"),user_infrastructure_1=require("../../user/infrastructure/user.infrastructure"),auth_application_1=require("../application/auth.application"),auth_controller_1=require("./auth.controller"),parameters_auth_login_1=require("./validators/parameters-auth-login"),parameters_auth_register_1=require("./validators/parameters-auth-register");class AuthRoutes{constructor(e){this.controller=e,this.router=(0,express_1.Router)(),this.mountRoutes()}mountRoutes(){const e=new authentication_guard_1.AuthenticationGuard;this.router.post("/v1/login",validate_middleware_1.ValidateParameters.execute(parameters_auth_login_1.ParametersAuthLogin),this.controller.login),this.router.post("/v1/new-access-token",this.controller.newAccessToken),this.router.post("/v1/register",validate_middleware_1.ValidateParameters.execute(parameters_auth_register_1.ParametersAuthRegister),this.controller.register),this.router.post("/v1/enable-2fa",e.execute2FA(!1).canActivate,this.controller.enable2FA),this.router.post("/v1/verify-2fa",e.execute2FA(!1).canActivate,this.controller.verify2FA)}getRouter(){return this.router}}const userRepository=new user_infrastructure_1.UserInfrastructure,application=new auth_application_1.AuthApplication(userRepository),userApplication=new user_application_1.UserApplication(userRepository),controller=new auth_controller_1.AuthController(application,userApplication),router=new AuthRoutes(controller).getRouter();exports.router=router;